<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng Ký & Đăng Nhập</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(120deg, #ff9966, #ff5e62);
            color: white;
            text-align: center;
        }

        .banner {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .hidden {
            display: none;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            padding: 20px;
        }

        .modal-header {
            border-bottom: none;
        }

        .modal-body input {
            border-radius: 20px;
            padding: 10px;
            border: 1px solid #ccc;
        }

        .btn-custom {
            border-radius: 20px;
            padding: 10px;
        }
    </style>
</head>
<body>

    <!-- Banner -->
    <div class="container mt-3">
        <div class="banner p-3 d-flex justify-content-between">
            <h3>🔥 Chào mừng đến với Website 🔥</h3>
            <div id="userSection">
                <button class="btn btn-warning btn-custom" data-bs-toggle="modal" data-bs-target="#registerModal">Đăng Ký</button>
                <button class="btn btn-success btn-custom" data-bs-toggle="modal" data-bs-target="#loginModal">Đăng Nhập</button>
            </div>
            <div id="welcomeSection" class="hidden">
                <span id="welcomeMessage" class="me-3"></span>
                <button onclick="logout()" class="btn btn-danger btn-custom">Đăng Xuất</button>
            </div>
        </div>
    </div>

    <!-- Modal Đăng Ký -->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content text-dark">
                <div class="modal-header">
                    <h5 class="modal-title">Đăng Ký</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="regUsername" class="form-control mb-2" placeholder="Tên đăng nhập">
                    <input type="password" id="regPassword" class="form-control mb-2" placeholder="Mật khẩu">
                    <button onclick="register()" class="btn btn-primary w-100 btn-custom">Đăng Ký</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Đăng Nhập -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content text-dark">
                <div class="modal-header">
                    <h5 class="modal-title">Đăng Nhập</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="loginUsername" class="form-control mb-2" placeholder="Tên đăng nhập">
                    <input type="password" id="loginPassword" class="form-control mb-2" placeholder="Mật khẩu">
                    <button onclick="login()" class="btn btn-success w-100 btn-custom">Đăng Nhập</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let savedUser = localStorage.getItem("username");
            let isLoggedIn = localStorage.getItem("isLoggedIn");

            if (savedUser && isLoggedIn === "true") {
                showUser(savedUser);
            }
        });

        function register() {
            let user = document.getElementById("regUsername").value;
            let pass = document.getElementById("regPassword").value;

            if (user && pass) {
                localStorage.setItem("username", user);
                localStorage.setItem("password", pass);
                alert("🎉 Đăng ký thành công! Vui lòng đăng nhập.");

                // Ẩn form đăng ký, hiển thị form đăng nhập
                var registerModal = bootstrap.Modal.getInstance(document.getElementById('registerModal'));
                registerModal.hide();
                var loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
                loginModal.show();
            } else {
                alert("⚠️ Vui lòng nhập đầy đủ thông tin!");
            }
        }

        function login() {
            let user = document.getElementById("loginUsername").value;
            let pass = document.getElementById("loginPassword").value;
            let savedUser = localStorage.getItem("username");
            let savedPass = localStorage.getItem("password");

            if (user === savedUser && pass === savedPass) {
                alert("✅ Đăng nhập thành công!");
                localStorage.setItem("isLoggedIn", "true");
                showUser(user);

                // Ẩn modal đăng nhập đúng cách
                var loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                if (loginModal) {
                    loginModal.hide();
                }

                // Xóa lớp nền mờ của modal nếu còn tồn tại
                document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());

            } else {
                alert("⚠️ Tài khoản chưa đăng ký hoặc sai mật khẩu!");
            }
        }

        function showUser(user) {
            document.getElementById("userSection").classList.add("hidden");
            document.getElementById("welcomeSection").classList.remove("hidden");
            document.getElementById("welcomeMessage").innerText = `👋 Xin chào, ${user}`;
        }

        function logout() {
            localStorage.setItem("isLoggedIn", "false");
            alert("👋 Bạn đã đăng xuất!");
            location.reload();
        }
    </script>

</body>
</html>

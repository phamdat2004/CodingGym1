<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat - CodeXpert ‚ú®</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Th√™m SweetAlert2 cho th√¥ng b√°o -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        /* üå∏ T·ªïng th·ªÉ */
        body {
            background: #f8f9fa;
            font-family: 'Poppins', sans-serif;
            color: #333;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        /* üè° Header */
        .header-container {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: #fff;
            border-radius: 0 0 50px 50px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        .header-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: pulse 10s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .header-container img {
            border: 5px solid #fff;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        .header-container img:hover {
            transform: scale(1.1);
        }
        .header-container h1 {
            font-size: 2.5rem;
            font-weight: 600;
            background: linear-gradient(to right, #ff6b6b, #e74c3c);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 10px 0;
        }
        .header-container p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* üåü Navbar */
        .navbar {
            background: #3498db;
            border-radius: 50px;
            margin: 20px auto;
            max-width: 90%;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .navbar-brand {
            font-weight: 600;
            color: #fff;
            transition: color 0.3s ease;
        }
        .navbar-brand:hover {
            color: #ffeb3b;
        }

        /* ü§ñ Chat Container */
        .chat-container {
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
            height: 70vh;
            display: flex;
            flex-direction: column;
            margin: 20px auto;
        }
        .chat-header {
            background: #3498db;
            color: #fff;
            border-radius: 20px 20px 0 0;
            padding: 15px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chat-header button {
            background: none;
            border: none;
            color: #fff;
            font-size: 1rem;
            transition: color 0.3s ease;
        }
        .chat-header button:hover {
            color: #ffeb3b;
        }
        .chat-box {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f1f1f1;
            border-radius: 0 0 20px 20px;
        }
        .chat-message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 70%;
            word-wrap: break-word;
        }
        .user-message {
            background: #3498db;
            color: #fff;
            margin-left: auto;
            text-align: right;
        }
        .bot-message {
            background: #e9ecef;
            color: #333;
            margin-right: auto;
        }
        .typing-indicator {
            background: #e9ecef;
            color: #333;
            margin-right: auto;
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 70%;
            display: none;
        }
        .typing-indicator span {
            animation: blink 1s infinite;
        }
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        .chat-input {
            padding: 15px;
            background: #fff;
            border-top: 1px solid #dfe6e9;
            display: flex;
            gap: 10px;
            border-radius: 0 0 20px 20px;
        }
        .chat-input input {
            border-radius: 25px;
            padding: 10px 15px;
            border: 1px solid #dfe6e9;
            transition: border-color 0.3s ease;
            flex: 1;
        }
        .chat-input input:focus {
            border-color: #3498db;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
        }
        .chat-input button {
            background: #e74c3c;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            color: #fff;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .chat-input button:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        /* üìú Scroll to Bottom Button */
        .scroll-to-bottom {
            position: absolute;
            bottom: 100px;
            right: 30px;
            background: #3498db;
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            display: none;
        }
        .scroll-to-bottom:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .chat-container {
                height: 80vh;
                margin: 10px;
            }
            .chat-header {
                font-size: 1.2rem;
            }
            .chat-message {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <!-- üíñ Header -->
    <header class="header-container">
        <img src="img/anhdat.jpg" alt="·∫¢nh c·ªßa b·∫°n" class="rounded-circle" width="150">
        <h1>ƒê·∫°t L√†m Backend üíª</h1>
        <p>Xin ch√†o m·ªçi ng∆∞·ªùi! Hi·ªán m√¨nh ƒëang l√†m Dev Backend Java trong lƒ©nh v·ª±c c√¥ng ngh·ªá.</p>
        <p>Trang web n√†y t·∫°o ra ƒë·ªÉ anh em Dev trao ƒë·ªïi ki·∫øn th·ª©c IT v√† t·∫£i source code ch·∫•t l∆∞·ª£ng.</p>
    </header>

    <!-- üåü Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html"><i class="fas fa-home"></i> V·ªÅ Trang Ch·ªß</a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Trang ch·ªß</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Danh m·ª•c</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Li√™n h·ªá</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- ü§ñ Chat Container -->
    <div class="chat-container position-relative">
        <div class="chat-header">
            <span>ü§ñ AI Chat - CodeXpert</span>
            <button onclick="clearChat()"><i class="fas fa-trash-alt"></i> X√≥a L·ªãch S·ª≠</button>
        </div>
        <div id="chat-box" class="chat-box">
            <!-- Tin nh·∫Øn s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
        </div>
        <div class="typing-indicator" id="typingIndicator">
            <span>Bot ƒëang tr·∫£ l·ªùi...</span>
        </div>
        <button class="scroll-to-bottom" id="scrollToBottom" onclick="scrollToBottom()"><i class="fas fa-chevron-down"></i></button>
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n...">
            <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i> G·ª≠i</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Ki·ªÉm tra ƒëƒÉng nh·∫≠p
            let isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn !== 'true') {
                Swal.fire({
                    icon: 'warning',
                    title: '‚ö†Ô∏è Vui l√≤ng ƒëƒÉng nh·∫≠p!',
                    text: 'B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ s·ª≠ d·ª•ng AI Chat.',
                    confirmButtonColor: '#e74c3c'
                }).then(() => {
                    window.location.href = 'index.html';
                });
                return;
            }

            // Load l·ªãch s·ª≠ chat t·ª´ localStorage
            const chatHistory = JSON.parse(localStorage.getItem('chatHistory')) || [];
            chatHistory.forEach(msg => addMessage(msg.text, msg.sender));

            // Ch√†o m·ª´ng ng∆∞·ªùi d√πng
            if (chatHistory.length === 0) {
                addMessage('Ch√†o b·∫°n! T√¥i l√† AI Chat c·ªßa CodeXpert. H√¥m nay t√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n? üòä', 'bot');
            }

            // X·ª≠ l√Ω cu·ªôn v√† hi·ªÉn th·ªã n√∫t "Cu·ªôn xu·ªëng"
            const chatBox = document.getElementById('chat-box');
            const scrollToBottomBtn = document.getElementById('scrollToBottom');
            chatBox.addEventListener('scroll', () => {
                if (chatBox.scrollTop + chatBox.clientHeight < chatBox.scrollHeight - 50) {
                    scrollToBottomBtn.style.display = 'flex';
                } else {
                    scrollToBottomBtn.style.display = 'none';
                }
            });
        });

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const userInput = document.getElementById('user-input').value.trim();
            if (!userInput) return;

            // Th√™m tin nh·∫Øn ng∆∞·ªùi d√πng
            addMessage(`B·∫°n: ${userInput}`, 'user');
            document.getElementById('user-input').value = '';

            // Hi·ªÉn th·ªã typing indicator
            const typingIndicator = document.getElementById('typingIndicator');
            typingIndicator.style.display = 'block';
            scrollToBottom();

            // Gi·∫£ l·∫≠p AI tr·∫£ l·ªùi (·ªü ƒë√¢y s·∫Ω g·ªçi Grok 3 ƒë·ªÉ tr·∫£ l·ªùi)
            setTimeout(() => {
                typingIndicator.style.display = 'none';
                const botResponse = getBotResponse(userInput);
                addMessage(`Bot: ${botResponse}`, 'bot');
            }, 1000);
        }

        function addMessage(text, sender) {
            const chatBox = document.getElementById('chat-box');
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('chat-message', `${sender}-message`);
            messageDiv.textContent = text;
            chatBox.appendChild(messageDiv);
            scrollToBottom();

            // L∆∞u v√†o localStorage
            const chatHistory = JSON.parse(localStorage.getItem('chatHistory')) || [];
            chatHistory.push({ text, sender });
            localStorage.setItem('chatHistory', JSON.stringify(chatHistory));
        }

        function clearChat() {
            Swal.fire({
                title: 'X√°c nh·∫≠n x√≥a l·ªãch s·ª≠ chat?',
                text: 'B·∫°n s·∫Ω kh√¥ng th·ªÉ kh√¥i ph·ª•c l·ªãch s·ª≠ chat sau khi x√≥a!',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#e74c3c',
                cancelButtonColor: '#6c757d',
                confirmButtonText: 'X√≥a',
                cancelButtonText: 'H·ªßy'
            }).then((result) => {
                if (result.isConfirmed) {
                    document.getElementById('chat-box').innerHTML = '';
                    localStorage.removeItem('chatHistory');
                    addMessage('L·ªãch s·ª≠ chat ƒë√£ ƒë∆∞·ª£c x√≥a. H·ªèi t√¥i b·∫•t c·ª© ƒëi·ªÅu g√¨ nh√©! üòä', 'bot');
                    Swal.fire({
                        icon: 'success',
                        title: 'ƒê√£ x√≥a!',
                        text: 'L·ªãch s·ª≠ chat ƒë√£ ƒë∆∞·ª£c x√≥a th√†nh c√¥ng.',
                        confirmButtonColor: '#e74c3c'
                    });
                }
            });
        }

        function scrollToBottom() {
            const chatBox = document.getElementById('chat-box');
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        // H√†m gi·∫£ l·∫≠p tr·∫£ l·ªùi c·ªßa AI (·ªü ƒë√¢y s·ª≠ d·ª•ng kh·∫£ nƒÉng c·ªßa Grok 3)
        function getBotResponse(userInput) {
            // D·ª±a tr√™n c√¢u h·ªèi c·ªßa ng∆∞·ªùi d√πng, m√¨nh (Grok 3) s·∫Ω tr·∫£ l·ªùi
            userInput = userInput.toLowerCase();

            // M·ªôt s·ªë c√¢u tr·∫£ l·ªùi m·∫´u (c√≥ th·ªÉ m·ªü r·ªông)
            if (userInput.includes('ch√†o') || userInput.includes('hi')) {
                return 'Ch√†o b·∫°n! R·∫•t vui ƒë∆∞·ª£c tr√≤ chuy·ªán v·ªõi b·∫°n. B·∫°n c·∫ßn gi√∫p g√¨ h√¥m nay? üòä';
            } else if (userInput.includes('code') || userInput.includes('source')) {
                return 'B·∫°n mu·ªën t√¨m source code √†? T√¥i c√≥ th·ªÉ g·ª£i √Ω m·ªôt s·ªë lo·∫°i code nh∆∞ Android, PHP, Java, ho·∫∑c ASP.NET. B·∫°n th√≠ch lo·∫°i n√†o?';
            } else if (userInput.includes('l·∫≠p tr√¨nh') || userInput.includes('programming')) {
                return 'L·∫≠p tr√¨nh l√† m·ªôt lƒ©nh v·ª±c r·∫•t th√∫ v·ªã! B·∫°n ƒëang h·ªçc ng√¥n ng·ªØ n√†o? T√¥i c√≥ th·ªÉ gi√∫p b·∫°n v·ªõi Java, Python, JavaScript, ho·∫∑c nhi·ªÅu ng√¥n ng·ªØ kh√°c. H·ªèi t√¥i nh√©!';
            } else if (userInput.includes('h·ªçc') || userInput.includes('h∆∞·ªõng d·∫´n')) {
                return 'B·∫°n mu·ªën h·ªçc g√¨? T√¥i c√≥ th·ªÉ h∆∞·ªõng d·∫´n b·∫°n l·∫≠p tr√¨nh, thi·∫øt k·∫ø web, ho·∫∑c gi·∫£i b√†i t·∫≠p. C·ª© h·ªèi tho·∫£i m√°i!';
            } else if (userInput.includes('ai l√† ai') || userInput.includes('b·∫°n l√† ai')) {
                return 'T√¥i l√† Grok 3, ƒë∆∞·ª£c t·∫°o ra b·ªüi xAI. T√¥i ·ªü ƒë√¢y ƒë·ªÉ gi√∫p b·∫°n tr·∫£ l·ªùi m·ªçi c√¢u h·ªèi, t·ª´ l·∫≠p tr√¨nh ƒë·∫øn ki·∫øn th·ª©c chung. H·ªèi t√¥i b·∫•t c·ª© ƒëi·ªÅu g√¨ nh√©!';
            } else {
                // Tr·∫£ l·ªùi m·∫∑c ƒë·ªãnh n·∫øu kh√¥ng nh·∫≠n di·ªán ƒë∆∞·ª£c c√¢u h·ªèi
                return 'Xin l·ªói, t√¥i ch∆∞a hi·ªÉu r√µ c√¢u h·ªèi c·ªßa b·∫°n. B·∫°n c√≥ th·ªÉ h·ªèi l·∫°i ho·∫∑c cung c·∫•p th√™m th√¥ng tin kh√¥ng? T√¥i r·∫•t mu·ªën gi√∫p b·∫°n! üòä';
            }
        }
    </script>
</body>
</html>